import{s as K,r as Q,o as X,n as N}from"../chunks/scheduler.CG7sC2st.js";import{S as Y,i as Z,e as I,s as x,t as V,c as T,a as D,k as R,f as A,b as q,d as k,l as j,q as $,g as M,h as P,z as U,n as z,o as ee,p as O,r as te,v as ne,H as oe,w as se,A as ie,x as ae,y as re,j as le}from"../chunks/index.DJ4GIz4L.js";import{m as H,I as ue}from"../chunks/Intro.C74EA1FA.js";class ce{diff(e,t,n={}){let o;typeof n=="function"?(o=n,n={}):"callback"in n&&(o=n.callback);const i=this.castInput(e,n),r=this.castInput(t,n),a=this.removeEmpty(this.tokenize(i,n)),s=this.removeEmpty(this.tokenize(r,n));return this.diffWithOptionsObj(a,s,n,o)}diffWithOptionsObj(e,t,n,o){var i;const r=d=>{if(d=this.postProcess(d,n),o){setTimeout(function(){o(d)},0);return}else return d},a=t.length,s=e.length;let l=1,u=a+s;n.maxEditLength!=null&&(u=Math.min(u,n.maxEditLength));const v=(i=n.timeout)!==null&&i!==void 0?i:1/0,g=Date.now()+v,p=[{oldPos:-1,lastComponent:void 0}];let f=this.extractCommon(p[0],t,e,0,n);if(p[0].oldPos+1>=s&&f+1>=a)return r(this.buildValues(p[0].lastComponent,t,e));let h=-1/0,w=1/0;const E=()=>{for(let d=Math.max(h,-l);d<=Math.min(w,l);d+=2){let y;const b=p[d-1],L=p[d+1];b&&(p[d-1]=void 0);let m=!1;if(L){const C=L.oldPos-d;m=L&&0<=C&&C<a}const _=b&&b.oldPos+1<s;if(!m&&!_){p[d]=void 0;continue}if(!_||m&&b.oldPos<L.oldPos?y=this.addToPath(L,!0,!1,0,n):y=this.addToPath(b,!1,!0,1,n),f=this.extractCommon(y,t,e,d,n),y.oldPos+1>=s&&f+1>=a)return r(this.buildValues(y.lastComponent,t,e))||!0;p[d]=y,y.oldPos+1>=s&&(w=Math.min(w,d-1)),f+1>=a&&(h=Math.max(h,d+1))}l++};if(o)(function d(){setTimeout(function(){if(l>u||Date.now()>g)return o(void 0);E()||d()},0)})();else for(;l<=u&&Date.now()<=g;){const d=E();if(d)return d}}addToPath(e,t,n,o,i){const r=e.lastComponent;return r&&!i.oneChangePerToken&&r.added===t&&r.removed===n?{oldPos:e.oldPos+o,lastComponent:{count:r.count+1,added:t,removed:n,previousComponent:r.previousComponent}}:{oldPos:e.oldPos+o,lastComponent:{count:1,added:t,removed:n,previousComponent:r}}}extractCommon(e,t,n,o,i){const r=t.length,a=n.length;let s=e.oldPos,l=s-o,u=0;for(;l+1<r&&s+1<a&&this.equals(n[s+1],t[l+1],i);)l++,s++,u++,i.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return u&&!i.oneChangePerToken&&(e.lastComponent={count:u,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=s,l}equals(e,t,n){return n.comparator?n.comparator(e,t):e===t||!!n.ignoreCase&&e.toLowerCase()===t.toLowerCase()}removeEmpty(e){const t=[];for(let n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t}castInput(e,t){return e}tokenize(e,t){return Array.from(e)}join(e){return e.join("")}postProcess(e,t){return e}get useLongestToken(){return!1}buildValues(e,t,n){const o=[];let i;for(;e;)o.push(e),i=e.previousComponent,delete e.previousComponent,e=i;o.reverse();const r=o.length;let a=0,s=0,l=0;for(;a<r;a++){const u=o[a];if(u.removed)u.value=this.join(n.slice(l,l+u.count)),l+=u.count;else{if(!u.added&&this.useLongestToken){let v=t.slice(s,s+u.count);v=v.map(function(g,p){const f=n[l+p];return f.length>g.length?f:g}),u.value=this.join(v)}else u.value=this.join(t.slice(s,s+u.count));s+=u.count,u.added||(l+=u.count)}}return o}}class fe extends ce{constructor(){super(...arguments),this.tokenize=he}equals(e,t,n){return n.ignoreWhitespace?((!n.newlineIsToken||!e.includes(`
`))&&(e=e.trim()),(!n.newlineIsToken||!t.includes(`
`))&&(t=t.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(e.endsWith(`
`)&&(e=e.slice(0,-1)),t.endsWith(`
`)&&(t=t.slice(0,-1))),super.equals(e,t,n)}}const de=new fe;function me(c,e,t){return de.diff(c,e,t)}function he(c,e){e.stripTrailingCr&&(c=c.replace(/\r\n/g,`
`));const t=[],n=c.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(let o=0;o<n.length;o++){const i=n[o];o%2&&!e.newlineIsToken?t[t.length-1]+=i:t.push(i)}return t}function pe(c){let e,t,n,o,i,r,a=c[4]&&B(c);return n=new ue({}),{c(){a&&a.c(),e=x(),t=I("article"),ne(n.$$.fragment),o=x(),i=new oe(!1),this.h()},l(s){a&&a.l(s),e=A(s),t=T(s,"ARTICLE",{class:!0});var l=D(t);se(n.$$.fragment,l),o=A(l),i=ie(l,!1),l.forEach(k),this.h()},h(){i.a=null,j(t,"class","markdown svelte-12ewko8")},m(s,l){a&&a.m(s,l),M(s,e,l),M(s,t,l),ae(n,t,null),P(t,o),i.m(c[2],t),r=!0},p(s,l){s[4]?a?a.p(s,l):(a=B(s),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),(!r||l&4)&&i.p(s[2])},i(s){r||(O(n.$$.fragment,s),r=!0)},o(s){z(n.$$.fragment,s),r=!1},d(s){s&&(k(e),k(t)),a&&a.d(s),re(n)}}}function _e(c){let e,t="Loading history...";return{c(){e=I("p"),e.textContent=t},l(n){e=T(n,"P",{"data-svelte-h":!0}),R(e)!=="svelte-1n5gi1e"&&(e.textContent=t)},m(n,o){M(n,e,o)},p:N,i:N,o:N,d(n){n&&k(e)}}}function B(c){let e,t;return{c(){e=I("div"),t=V(c[4]),this.h()},l(n){e=T(n,"DIV",{class:!0});var o=D(e);t=q(o,c[4]),o.forEach(k),this.h()},h(){j(e,"class","commit-date svelte-12ewko8")},m(n,o){M(n,e,o),P(e,t)},p(n,o){o&16&&le(t,n[4])},d(n){n&&k(e)}}}function ve(c){let e,t,n=`<p>We regularly update the way we present ourselves to reflect our practice,
      our work, and our ambitions.<br/>
      Here, you can browse every change over time.<br/></p>`,o,i,r,a,s,l,u,v,g,p,f,h,w,E,d;const y=[_e,pe],b=[];function L(m,_){return m[3]?0:m[2]?1:-1}return~(f=L(c))&&(h=b[f]=y[f](c)),{c(){e=I("main"),t=I("div"),t.innerHTML=n,o=x(),i=I("div"),r=I("button"),a=V("Previous"),l=x(),u=I("button"),v=V("Next"),p=x(),h&&h.c(),this.h()},l(m){e=T(m,"MAIN",{class:!0});var _=D(e);t=T(_,"DIV",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-uv89pw"&&(t.innerHTML=n),o=A(_),i=T(_,"DIV",{style:!0});var C=D(i);r=T(C,"BUTTON",{class:!0});var W=D(r);a=q(W,"Previous"),W.forEach(k),l=A(C),u=T(C,"BUTTON",{style:!0,class:!0});var S=D(u);v=q(S,"Next"),S.forEach(k),C.forEach(k),p=A(_),h&&h.l(_),_.forEach(k),this.h()},h(){j(t,"class","intro-history svelte-12ewko8"),r.disabled=s=c[3]||c[1]===c[0].length-1,j(r,"class","svelte-12ewko8"),u.disabled=g=c[3]||c[1]===0,$(u,"margin-left","5px"),j(u,"class","svelte-12ewko8"),$(i,"margin-bottom","20px"),j(e,"class","svelte-12ewko8")},m(m,_){M(m,e,_),P(e,t),P(e,o),P(e,i),P(i,r),P(r,a),P(i,l),P(i,u),P(u,v),P(e,p),~f&&b[f].m(e,null),w=!0,E||(d=[U(r,"click",c[5]),U(u,"click",c[6])],E=!0)},p(m,[_]){(!w||_&11&&s!==(s=m[3]||m[1]===m[0].length-1))&&(r.disabled=s),(!w||_&10&&g!==(g=m[3]||m[1]===0))&&(u.disabled=g);let C=f;f=L(m),f===C?~f&&b[f].p(m,_):(h&&(te(),z(b[C],1,1,()=>{b[C]=null}),ee()),~f?(h=b[f],h?h.p(m,_):(h=b[f]=y[f](m),h.c()),O(h,1),h.m(e,null)):h=null)},i(m){w||(O(h),w=!0)},o(m){z(h),w=!1},d(m){m&&k(e),~f&&b[f].d(),E=!1,Q(d)}}}const G="sinanatra/krisenstab",J="static/letter.md";async function F(c){const t=await(await fetch(`https://api.github.com/repos/${G}/contents/${J}?ref=${c}`)).json();return atob(t.content.replace(/\n/g,""))}function ge(c,e,t){let n,o=[],i=0,r="",a=!1;X(async()=>{const v=await fetch(`https://api.github.com/repos/${G}/commits?path=${J}&per_page=100`);t(0,o=await v.json()),o.length>1&&(t(1,i=0),await s())});async function s(){t(3,a=!0);const v=o[i],g=o[i+1],p=await F(v.sha),f=g?await F(g.sha):"",h=me(f,p);t(2,r=h.map(w=>w.added?`<span class="diff-added">${H.parse(w.value)}</span>`:w.removed?`<span class="diff-removed">${H.parse(w.value)}</span>`:H.parse(w.value)).join("")),t(3,a=!1)}async function l(){i<o.length-1&&(t(1,i+=1),await s())}async function u(){i>0&&(t(1,i-=1),await s())}return c.$$.update=()=>{var v,g,p;c.$$.dirty&3&&t(4,n=o.length&&((p=(g=(v=o[i])==null?void 0:v.commit)==null?void 0:g.author)!=null&&p.date)?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(new Date(o[i].commit.author.date)):"")},[o,i,r,a,n,l,u]}class Pe extends Y{constructor(e){super(),Z(this,e,ge,ve,K,{})}}export{Pe as component};
